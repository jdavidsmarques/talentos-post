<div class="container">
  <h1>Social media post - Talentos Objetivos</h1>

  <div class="main-layout">
    <div class="form-column">
      <div class="form-section">
        <h2>Race Information</h2>
        <div class="form-grid">
          <div>
            <label>Distance:</label>
            <textarea
              [(ngModel)]="formData.distance"
              placeholder="20K"
              rows="2"
            ></textarea>
          </div>
          <div>
            <label>Race Name:</label>
            <textarea
              [(ngModel)]="formData.raceName"
              placeholder="TRAIL DA PEDRA FERIDA"
              rows="2"
            ></textarea>
          </div>
          <div>
            <label>Date & Location:</label>
            <input
              type="text"
              [(ngModel)]="formData.dateLocation"
              placeholder="16 NOV - PENELA, PORTUGAL"
            />
          </div>
        </div>
      </div>

      <div class="form-section">
        <app-athlete-selector
          [athletes]="athletes"
          [selectedAthletes]="selectedAthleteIds"
          (toggleAthlete)="onToggleAthlete($event)"
        ></app-athlete-selector>
      </div>
    </div>

    <div class="preview-column">
      <div class="preview-section">
        <div class="preview-header">
          <h2>Preview</h2>
          <div class="preview-controls">
            <button
              (click)="openFullPreview()"
              class="full-preview-btn"
              title="View Full Size"
            >
              Full Size
            </button>
            <button
              (click)="onDownload()"
              [disabled]="!canDownload()"
              class="download-btn"
            >
              {{ isGenerating ? 'Generating...' : 'Download' }}
            </button>
          </div>
        </div>
        <div class="preview-container">
          <div #postTemplate>
            <app-post-template 
              [data]="previewData"
              [style.transform]="'scale(0.5)'"
              [style.transform-origin]="'top center'"
            ></app-post-template>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Full Preview Overlay -->
  <div class="full-preview-overlay" *ngIf="showFullPreview" (click)="closeFullPreview()">
    <div class="full-preview-content" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeFullPreview()" title="Close">Ã—</button>
      <app-post-template 
        [data]="previewData"
        class="full-preview-template"
      ></app-post-template>
    </div>
  </div>
</div>

